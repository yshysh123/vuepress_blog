---
title: '2020-10-14'
sidebar: true
categories:
  - learn
date: 2020-10-14
tags:
  - js
---

:::tip
2020-10-14 å­¦ä¹ è®°å½•
:::

<!-- more -->

# JS åŸºç¡€

## åŸå‹ / æ„é€ å‡½æ•° / å®ä¾‹

- åŸå‹(prototype): ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œç”¨äºå®ç°å¯¹è±¡çš„ å±æ€§ç»§æ‰¿ã€‚å¯ä»¥ç®€å•çš„ç†è§£æˆå¯¹è±¡çš„çˆ¹ã€‚åœ¨ Firefox å’Œ Chrome ä¸­ï¼Œæ¯ä¸ª JavaScript å¯¹è±¡ä¸­éƒ½åŒ…å«ä¸€ä¸ª**proto** (éæ ‡å‡†)çš„å±æ€§æŒ‡å‘å®ƒçˆ¹(è¯¥å¯¹è±¡çš„åŸå‹)ï¼Œå¯ obj.**proto**è¿›è¡Œè®¿é—®ã€‚

* æ„é€ å‡½æ•°: å¯ä»¥é€šè¿‡ new æ¥ æ–°å»ºä¸€ä¸ªå¯¹è±¡ çš„å‡½æ•°ã€‚

- å®ä¾‹: é€šè¿‡æ„é€ å‡½æ•°å’Œ new åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼Œä¾¿æ˜¯å®ä¾‹ã€‚ å®ä¾‹é€šè¿‡**proto**æŒ‡å‘åŸå‹ï¼Œé€šè¿‡ constructor æŒ‡å‘æ„é€ å‡½æ•°ã€‚

```js
å®ä¾‹.__proto__ === åŸå‹;
åŸå‹.constructor === æ„é€ å‡½æ•°;
æ„é€ å‡½æ•°.prototype === åŸå‹;
// è¿™æ¡çº¿å…¶å®æ˜¯æ˜¯åŸºäºåŸå‹è¿›è¡Œè·å–çš„ï¼Œå¯ä»¥ç†è§£æˆä¸€æ¡åŸºäºåŸå‹çš„æ˜ å°„çº¿
// ä¾‹å¦‚:
// const o = new Object()
// o.constructor === Object   --> true
// o.__proto__ = null;
// o.constructor === Object   --> false
// æ³¨æ„: å…¶å®å®ä¾‹ä¸Šå¹¶ä¸æ˜¯çœŸæ­£æœ‰ constructor è¿™ä¸ªæŒ‡é’ˆï¼Œå®ƒå…¶å®æ˜¯ä»åŸå‹é“¾ä¸Šè·å–çš„
//      instance.hasOwnProperty('constructor') === false   (æ„Ÿè°¢ åˆ˜åšæµ· Brian ç«¥é‹ğŸ¥³)
å®ä¾‹.constructor === æ„é€ å‡½æ•°;
```

[åŸå‹](https://user-gold-cdn.xitu.io/2019/2/14/168e9d9b940c4c6f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

# CSS åŸºç¡€

## BFC

å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œè®©å¤„äº BFC å†…éƒ¨çš„å…ƒç´ ä¸å¤–éƒ¨çš„å…ƒç´ ç›¸äº’éš”ç¦»ï¼Œä½¿å†…å¤–å…ƒç´ çš„å®šä½ä¸ä¼šç›¸äº’å½±å“ã€‚

- è§¦å‘æ¡ä»¶:

  - æ ¹å…ƒç´ 
  - position: absolute/fixed
  - display: inline-block / table
  - float å…ƒç´ 
  - ovevflow !== visible

- è§„åˆ™:

  - å±äºåŒä¸€ä¸ª BFC çš„ä¸¤ä¸ªç›¸é‚» Box å‚ç›´æ’åˆ—
  - å±äºåŒä¸€ä¸ª BFC çš„ä¸¤ä¸ªç›¸é‚» Box çš„ margin ä¼šå‘ç”Ÿé‡å 
  - BFC ä¸­å­å…ƒç´ çš„ margin box çš„å·¦è¾¹ï¼Œ ä¸åŒ…å«å— (BFC) border box çš„å·¦è¾¹ç›¸æ¥è§¦ (å­å…ƒç´  absolute é™¤å¤–)
  - BFC çš„åŒºåŸŸä¸ä¼šä¸ float çš„å…ƒç´ åŒºåŸŸé‡å 
  - è®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å­å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—
  - æ–‡å­—å±‚ä¸ä¼šè¢«æµ®åŠ¨å±‚è¦†ç›–ï¼Œç¯ç»•äºå‘¨å›´

- åº”ç”¨:

  - é˜»æ­¢ margin é‡å 
  - å¯ä»¥åŒ…å«æµ®åŠ¨å…ƒç´  â€”â€” æ¸…é™¤å†…éƒ¨æµ®åŠ¨(æ¸…é™¤æµ®åŠ¨çš„åŸç†æ˜¯ä¸¤ä¸ª div éƒ½ä½äºåŒä¸€ä¸ª BFC åŒºåŸŸä¹‹ä¸­)
  - è‡ªé€‚åº”ä¸¤æ å¸ƒå±€
  - å¯ä»¥é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–

# æ‰‹å†™ JS

## æ•°ç»„å»é‡

```js
//  æ–¹æ³•ä¸€ï¼šåˆ©ç”¨Set
const res1 = Array.from(new Set(arr));
const res2 = [...new Set(arr)];
//  æ–¹æ³•äºŒï¼šä¸¤å±‚forå¾ªç¯+splice
const unique1 = (arr) => {
  let len = arr.length;
  for (let i = 0; i < len; i++) {
    for (let j = i + 1; j < len; j++) {
      if (arr[i] === arr[j]) {
        arr.splice(j, 1);
        // æ¯åˆ é™¤ä¸€ä¸ªæ ‘ï¼Œj--ä¿è¯jçš„å€¼ç»è¿‡è‡ªåŠ åä¸å˜ã€‚åŒæ—¶ï¼Œlen--ï¼Œå‡å°‘å¾ªç¯æ¬¡æ•°æå‡æ€§èƒ½
        len--;
        j--;
      }
    }
  }
  return arr;
};
//  æ–¹æ³•ä¸‰ï¼šåˆ©ç”¨indexOf
const unique2 = (arr) => {
  const res = [];
  for (let i = 0; i < arr.length; i++) {
    if (res.indexOf(arr[i]) === -1) res.push(arr[i]);
  }
  return res;
};
//  æ–¹æ³•å››ï¼šåˆ©ç”¨include
const unique3 = (arr) => {
  const res = [];
  for (let i = 0; i < arr.length; i++) {
    if (!res.includes(arr[i])) res.push(arr[i]);
  }
  return res;
};
//  æ–¹æ³•äº”ï¼šåˆ©ç”¨filter
const unique4 = (arr) => {
  return arr.filter((item, index) => {
    return arr.indexOf(item) === index;
  });
};
//  æ–¹æ³•å…­ï¼šåˆ©ç”¨Map
const unique5 = (arr) => {
  const map = new Map();
  const res = [];
  for (let i = 0; i < arr.length; i++) {
    if (!map.has(arr[i])) {
      map.set(arr[i], true);
      res.push(arr[i]);
    }
  }
  return res;
};
```

# æµè§ˆå™¨çŸ¥è¯†

## è·¨æ ‡ç­¾é¡µé€šè®¯

- é€šè¿‡çˆ¶é¡µé¢ window.open()å’Œå­é¡µé¢ postMessage

- å¼‚æ­¥ä¸‹ï¼Œé€šè¿‡ window.open('about: blank') å’Œ tab.location.href = '\*'

* è®¾ç½®åŒåŸŸä¸‹å…±äº«çš„ localStorage ä¸ç›‘å¬ window.onstorage

  - é‡å¤å†™å…¥ç›¸åŒçš„å€¼æ— æ³•è§¦å‘
  - ä¼šå—åˆ°æµè§ˆå™¨éšèº«æ¨¡å¼ç­‰çš„é™åˆ¶

- è®¾ç½®å…±äº« cookie ä¸ä¸æ–­è½®è¯¢è„æ£€æŸ¥(setInterval)

* å€ŸåŠ©æœåŠ¡ç«¯æˆ–è€…ä¸­é—´å±‚å®ç°

# ç®—æ³•

## å†’æ³¡æ’åº

```js
function bubleSort(arr) {
  var len = arr.length;
  for (let outer = len; outer >= 2; outer--) {
    for (let inner = 0; inner <= outer - 1; inner++) {
      if (arr[inner] > arr[inner + 1]) {
        [arr[inner], arr[inner + 1]] = [arr[inner + 1], arr[inner]];
      }
    }
  }
  return arr;
}
```

## é€‰æ‹©æ’åº

```js
function selectSort(arr) {
  var len = arr.length;
  for (let i = 0; i < len - 1; i++) {
    for (let j = i; j < len; j++) {
      if (arr[j] < arr[i]) {
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }
  }
  return arr;
}
```

## æ’å…¥æ’åº

```js
function insertSort(arr) {
  for (let i = 1; i < arr.length; i++) {
    //å¤–å¾ªç¯ä»1å¼€å§‹ï¼Œé»˜è®¤arr[0]æ˜¯æœ‰åºæ®µ
    for (let j = i; j > 0; j--) {
      //j = i,å°†arr[j]ä¾æ¬¡æ’å…¥æœ‰åºæ®µä¸­
      if (arr[j] < arr[j - 1]) {
        [arr[j], arr[j - 1]] = [arr[j - 1], arr[j]];
      } else {
        break;
      }
    }
  }
  retu
```

# Vue çŸ¥è¯†

Vue ä¸­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåº

- åŠ è½½æ¸²æŸ“è¿‡ç¨‹
  - çˆ¶ beforeCreate->çˆ¶ created->çˆ¶ beforeMount->å­ beforeCreate->å­ created->å­ beforeMount- >å­ mounted->çˆ¶ mounted
- å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹
  - çˆ¶ beforeUpdate->å­ beforeUpdate->å­ updated->çˆ¶ updated
- çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹
  - çˆ¶ beforeUpdate -> çˆ¶ updated
- é”€æ¯è¿‡ç¨‹
  - çˆ¶ beforeDestroy->å­ beforeDestroy->å­ destroyed->çˆ¶ destroyed

# React çŸ¥è¯†

## ä½ æ˜¯å¦‚ä½•ç†è§£ fiber çš„?

React Fiber æ˜¯ä¸€ç§åŸºäºæµè§ˆå™¨çš„å•çº¿ç¨‹è°ƒåº¦ç®—æ³•.

React 16 ä¹‹å‰ ï¼ŒreconcilationÂ  ç®—æ³•å®é™…ä¸Šæ˜¯é€’å½’ï¼Œæƒ³è¦ä¸­æ–­é€’å½’æ˜¯å¾ˆå›°éš¾çš„ï¼ŒReact 16 å¼€å§‹ä½¿ç”¨äº†å¾ªç¯æ¥ä»£æ›¿ä¹‹å‰çš„é€’å½’.

Fiberï¼šä¸€ç§å°† recocilation ï¼ˆé€’å½’ diffï¼‰ï¼Œæ‹†åˆ†æˆæ— æ•°ä¸ªå°ä»»åŠ¡çš„ç®—æ³•ï¼›å®ƒéšæ—¶èƒ½å¤Ÿåœæ­¢ï¼Œæ¢å¤ã€‚åœæ­¢æ¢å¤çš„æ—¶æœºå–å†³äºå½“å‰çš„ä¸€å¸§ï¼ˆ16msï¼‰å†…ï¼Œè¿˜æœ‰æ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´å…è®¸è®¡ç®—ã€‚
