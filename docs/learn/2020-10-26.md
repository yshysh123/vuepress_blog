---
title: '2020-10-26'
sidebar: true
categories:
  - learn
date: 2020-10-26
tags:
  - js
---

:::tip
2020-10-26 å­¦ä¹ è®°å½•
:::

<!-- more -->

# JS åŸºç¡€

## new è¿ç®—ç¬¦çš„æ‰§è¡Œè¿‡ç¨‹

- æ–°ç”Ÿæˆä¸€ä¸ªå¯¹è±¡
- é“¾æŽ¥åˆ°åŽŸåž‹: obj.**proto** = Con.prototype
- ç»‘å®š this: apply
- è¿”å›žæ–°å¯¹è±¡(å¦‚æžœæž„é€ å‡½æ•°æœ‰è‡ªå·± retrun æ—¶ï¼Œåˆ™è¿”å›žè¯¥å€¼)

# CSS åŸºç¡€

## CSS é¢„å¤„ç†å™¨(Sass/Less/Postcss)

CSS é¢„å¤„ç†å™¨çš„åŽŸç†: æ˜¯å°†ç±» CSS è¯­è¨€é€šè¿‡ Webpack ç¼–è¯‘ è½¬æˆæµè§ˆå™¨å¯è¯»çš„çœŸæ­£ CSSã€‚åœ¨è¿™å±‚ç¼–è¯‘ä¹‹ä¸Šï¼Œä¾¿å¯ä»¥èµ‹äºˆ CSS æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¸¸ç”¨åŠŸèƒ½:

- åµŒå¥—
- å˜é‡
- å¾ªçŽ¯è¯­å¥
- æ¡ä»¶è¯­å¥
- è‡ªåŠ¨å‰ç¼€
- å•ä½è½¬æ¢
- mixin å¤ç”¨

# æ‰‹å†™ JS

```js
Array.prototype.map = function(callback, thisArg) {
  if (this == undefined) {
    throw new TypeError('this is null or not defined');
  }
  if (typeof callback !== 'function') {
    throw new TypeError(callback + ' is not a function');
  }
  const res = [];
  // åŒç†
  const O = Object(this);
  const len = O.length >>> 0;
  for (let i = 0; i < len; i++) {
    if (i in O) {
      // è°ƒç”¨å›žè°ƒå‡½æ•°å¹¶ä¼ å…¥æ–°æ•°ç»„
      res[i] = callback.call(thisArg, O[i], i, this);
    }
  }
  return res;
};
```

# æµè§ˆå™¨çŸ¥è¯†

## æµè§ˆå™¨ç¼“å­˜ç­–ç•¥

### å¼ºç¼“å­˜

å¼ºç¼“å­˜ä¸¤ä¸ªç›¸å…³å­—æ®µï¼Œã€ŒExpiresã€ï¼Œã€ŒCache-Controlã€ã€‚

ã€Œå¼ºç¼“å­˜åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯å‘é€ HTTP è¯·æ±‚ï¼Œä¸€ç§ä¸éœ€è¦å‘é€ã€‚ã€

é¦–å…ˆæ£€æŸ¥å¼ºç¼“å­˜ï¼Œè¿™ä¸ªé˜¶æ®µ**ä¸éœ€è¦å‘é€ HTTP è¯·æ±‚ã€‚**é€šè¿‡æŸ¥æ‰¾ä¸åŒçš„å­—æ®µæ¥è¿›è¡Œï¼Œä¸åŒçš„ HTTP ç‰ˆæœ¬æ‰€ä»¥ä¸åŒã€‚

HTTP1.0 ç‰ˆæœ¬ï¼Œä½¿ç”¨çš„æ˜¯ Expiresï¼ŒHTTP1.1 ä½¿ç”¨çš„æ˜¯ Cache-Control

#### Expires

Expires å³è¿‡æœŸæ—¶é—´ï¼Œæ—¶é—´æ˜¯ç›¸å¯¹äºŽæœåŠ¡å™¨çš„æ—¶é—´è€Œè¨€çš„ï¼Œå­˜åœ¨äºŽæœåŠ¡ç«¯è¿”å›žçš„å“åº”å¤´ä¸­ï¼Œåœ¨è¿™ä¸ªè¿‡æœŸæ—¶é—´ä¹‹å‰å¯ä»¥ç›´æŽ¥ä»Žç¼“å­˜é‡Œé¢èŽ·å–æ•°æ®ï¼Œæ— éœ€å†æ¬¡è¯·æ±‚ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ ·:

```
Expires:Mon, 29 Jun 2020 11:10:23 GMT
```

è¡¨ç¤ºè¯¥èµ„æºåœ¨ 2020 å¹´ 7 æœˆ 29 æ—¥ 11:10:23 è¿‡æœŸï¼Œè¿‡æœŸæ—¶å°±ä¼šé‡æ–°å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚

è¿™ä¸ªæ–¹å¼æœ‰ä¸€ä¸ªé—®é¢˜ï¼šã€ŒæœåŠ¡å™¨çš„æ—¶é—´å’Œæµè§ˆå™¨çš„æ—¶é—´å¯èƒ½å¹¶ä¸ä¸€è‡´ã€ï¼Œæ‰€ä»¥ HTTP1.1 æå‡ºæ–°çš„å­—æ®µä»£æ›¿å®ƒã€‚

#### Cache-Control

HTTP1.1 ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨çš„å°±æ˜¯è¯¥å­—æ®µï¼Œè¿™ä¸ªå­—æ®µé‡‡ç”¨çš„æ—¶é—´æ˜¯è¿‡æœŸæ—¶é•¿ï¼Œå¯¹åº”çš„æ˜¯ max-ageã€‚

```
Cache-Control:max-age=6000
```

ä¸Šé¢ä»£è¡¨è¯¥èµ„æºè¿”å›žåŽ 6000 ç§’ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ç¼“å­˜ã€‚

å½“ç„¶äº†ï¼Œå®ƒè¿˜æœ‰å…¶ä»–å¾ˆå¤šå…³é”®çš„æŒ‡ä»¤ï¼Œæ¢³ç†äº†å‡ ä¸ªé‡è¦çš„ ðŸ‘‡

æ³¨æ„ç‚¹ï¼š

- å½“ Expires å’Œ Cache-Control åŒæ—¶å­˜åœ¨æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ Cache-Controlã€‚
- å½“ç„¶äº†ï¼Œå½“ç¼“å­˜èµ„æºå¤±æ•ˆäº†ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å‘½ä¸­å¼ºç¼“å­˜ï¼ŒæŽ¥ä¸‹æ¥å°±è¿›å…¥åå•†ç¼“å­˜ ðŸ‘‡

### åå•†ç¼“å­˜

å¼ºç¼“å­˜å¤±æ•ˆåŽï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦å“åº”çš„ç¼“å­˜ Tag æ¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ ¹æ®å¯¹åº”çš„ tagï¼Œæ¥å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ã€‚

ç¼“å­˜åˆ†ä¸ºä¸¤ç§ï¼Œã€ŒLast-Modifiedã€ å’Œ ã€ŒETagã€ã€‚ä¸¤è€…å„æœ‰ä¼˜åŠ¿ï¼Œå¹¶ä¸å­˜åœ¨è°å¯¹è°æœ‰ç»å¯¹çš„ä¼˜åŠ¿ï¼Œä¸Žä¸Šé¢æ‰€è®²çš„å¼ºç¼“å­˜ä¸¤ä¸ª Tag æ‰€ä¸åŒã€‚

#### Last-Modified

è¿™ä¸ªå­—æ®µè¡¨ç¤ºçš„æ˜¯ã€Œæœ€åŽä¿®æ”¹æ—¶é—´ã€ã€‚åœ¨æµè§ˆå™¨ç¬¬ä¸€æ¬¡ç»™æœåŠ¡å™¨å‘é€è¯·æ±‚åŽï¼ŒæœåŠ¡å™¨ä¼šåœ¨å“åº”å¤´ä¸­åŠ ä¸Šè¿™ä¸ªå­—æ®µã€‚
æµè§ˆå™¨æŽ¥æ”¶åˆ°åŽï¼Œã€Œå¦‚æžœå†æ¬¡è¯·æ±‚ã€ï¼Œä¼šåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ If-Modified-Since å­—æ®µï¼Œè¿™ä¸ªå­—æ®µçš„å€¼ä¹Ÿå°±æ˜¯æœåŠ¡å™¨ä¼ æ¥çš„æœ€åŽä¿®æ”¹æ—¶é—´ã€‚
æœåŠ¡å™¨æ‹¿åˆ°è¯·æ±‚å¤´ä¸­çš„ If-Modified-Since çš„å­—æ®µåŽï¼Œå…¶å®žä¼šå’Œè¿™ä¸ªæœåŠ¡å™¨ä¸­è¯¥èµ„æºçš„æœ€åŽä¿®æ”¹æ—¶é—´å¯¹æ¯”:

å¦‚æžœè¯·æ±‚å¤´ä¸­çš„è¿™ä¸ªå€¼å°äºŽæœ€åŽä¿®æ”¹æ—¶é—´ï¼Œè¯´æ˜Žæ˜¯æ—¶å€™æ›´æ–°äº†ã€‚è¿”å›žæ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„çš„ HTTP è¯·æ±‚å“åº”çš„æµç¨‹ä¸€æ ·ã€‚å¦åˆ™è¿”å›ž 304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æŽ¥ä½¿ç”¨ç¼“å­˜ã€‚

#### ETag

ETag æ˜¯æœåŠ¡å™¨æ ¹æ®å½“å‰æ–‡ä»¶çš„å†…å®¹ï¼Œå¯¹æ–‡ä»¶ç”Ÿæˆå”¯ä¸€çš„æ ‡è¯†ï¼Œæ¯”å¦‚ MD5 ç®—æ³•ï¼Œåªè¦é‡Œé¢çš„å†…å®¹æœ‰æ”¹åŠ¨ï¼Œè¿™ä¸ªå€¼å°±ä¼šä¿®æ”¹ï¼ŒæœåŠ¡å™¨é€šè¿‡æŠŠå“åº”å¤´æŠŠè¯¥å­—æ®µç»™æµè§ˆå™¨ã€‚

æµè§ˆå™¨æŽ¥å—åˆ° ETag å€¼ï¼Œä¼šåœ¨ä¸‹æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªå€¼ä½œä¸ºã€ŒIf-None-Matchã€è¿™ä¸ªå­—æ®µçš„å†…å®¹ï¼Œå‘ç»™æœåŠ¡å™¨ã€‚

æœåŠ¡å™¨æŽ¥æ”¶åˆ°ã€ŒIf-None-Matchã€åŽï¼Œä¼šè·ŸæœåŠ¡å™¨ä¸Šè¯¥èµ„æºçš„ã€ŒETagã€è¿›è¡Œæ¯”å¯¹ ðŸ‘‡

å¦‚æžœä¸¤è€…ä¸€æ ·çš„è¯ï¼Œç›´æŽ¥è¿”å›ž 304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æŽ¥ä½¿ç”¨ç¼“å­˜å¦‚æžœä¸ä¸€æ ·çš„è¯ï¼Œè¯´æ˜Žå†…å®¹æ›´æ–°äº†ï¼Œè¿”å›žæ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„çš„ HTTP è¯·æ±‚å“åº”çš„æµç¨‹ä¸€æ ·

### ä¸¤è€…å¯¹æ¯”

- æ€§èƒ½ä¸Šï¼ŒLast-Modified ä¼˜äºŽ ETagï¼ŒLast-Modified è®°å½•çš„æ˜¯æ—¶é—´ç‚¹ï¼Œè€Œ Etag éœ€è¦æ ¹æ®æ–‡ä»¶çš„ MD5 ç®—æ³•ç”Ÿæˆå¯¹åº”çš„ hash å€¼ã€‚
- ç²¾åº¦ä¸Šï¼ŒETag ä¼˜äºŽ Last-Modifiedã€‚ETag æŒ‰ç…§å†…å®¹ç»™èµ„æºå¸¦ä¸Šæ ‡è¯†ï¼Œèƒ½å‡†ç¡®æ„ŸçŸ¥èµ„æºå˜åŒ–ï¼ŒLast-Modified åœ¨æŸäº›åœºæ™¯å¹¶ä¸èƒ½å‡†ç¡®æ„ŸçŸ¥å˜åŒ–ï¼Œæ¯”å¦‚ ðŸ‘‡

  - ç¼–è¾‘äº†èµ„æºæ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶å†…å®¹å¹¶æ²¡æœ‰æ›´æ”¹ï¼Œè¿™æ ·ä¹Ÿä¼šé€ æˆç¼“å­˜å¤±æ•ˆã€‚
  - Last-Modified èƒ½å¤Ÿæ„ŸçŸ¥çš„å•ä½æ—¶é—´æ˜¯ç§’ï¼Œå¦‚æžœæ–‡ä»¶åœ¨ 1 ç§’å†…æ”¹å˜äº†å¤šæ¬¡ï¼Œé‚£ä¹ˆè¿™æ—¶å€™çš„ Last-Modified å¹¶æ²¡æœ‰ä½“çŽ°å‡ºä¿®æ”¹äº†ã€‚

- æœ€åŽï¼Œã€Œå¦‚æžœä¸¤ç§æ–¹å¼éƒ½æ”¯æŒçš„è¯ï¼ŒæœåŠ¡å™¨ä¼šä¼˜å…ˆè€ƒè™‘ ETagã€ã€‚

### ç¼“å­˜ä½ç½®

æŽ¥ä¸‹æ¥æˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ç¼“å­˜çš„è¯ï¼Œç¼“å­˜çš„ä½ç½®åœ¨å“ªé‡Œå‘¢ï¼Ÿ
æµè§ˆå™¨ç¼“å­˜çš„ä½ç½®çš„è¯ï¼Œå¯ä»¥åˆ†ä¸ºå››ç§,ä¼˜å…ˆçº§ä»Žé«˜åˆ°ä½ŽæŽ’åˆ—åˆ†åˆ« ðŸ‘‡

Service WorkerMemory CacheDisk CachePush Cache

- Service Worker
  è¿™ä¸ªåº”ç”¨åœºæ™¯æ¯”å¦‚ PWAï¼Œå®ƒå€Ÿé‰´äº† Web Worker æ€è·¯ï¼Œç”±äºŽå®ƒè„±ç¦»äº†æµè§ˆå™¨çš„çª—ä½“ï¼Œå› æ­¤æ— æ³•ç›´æŽ¥è®¿é—® DOMã€‚å®ƒèƒ½å®Œæˆçš„åŠŸèƒ½æ¯”å¦‚ï¼šç¦»çº¿ç¼“å­˜ã€æ¶ˆæ¯æŽ¨é€å’Œç½‘ç»œä»£ç†ï¼Œå…¶ä¸­ç¦»çº¿ç¼“å­˜å°±æ˜¯ã€ŒService Worker Cacheã€ã€‚
- Memory Cache
  æŒ‡çš„æ˜¯å†…å­˜ç¼“å­˜ï¼Œä»Žæ•ˆçŽ‡ä¸Šè®²å®ƒæ˜¯æœ€å¿«çš„ï¼Œä»Žå­˜æ´»æ—¶é—´æ¥è®²åˆæ˜¯æœ€çŸ­çš„ï¼Œå½“æ¸²æŸ“è¿›ç¨‹ç»“æŸåŽï¼Œå†…å­˜ç¼“å­˜ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚
- Disk Cache
  å­˜å‚¨åœ¨ç£ç›˜ä¸­çš„ç¼“å­˜ï¼Œä»Žå­˜å–æ•ˆçŽ‡ä¸Šè®²æ˜¯æ¯”å†…å­˜ç¼“å­˜æ…¢çš„ï¼Œä¼˜åŠ¿åœ¨äºŽå­˜å‚¨å®¹é‡å’Œå­˜å‚¨æ—¶é•¿ã€‚
- Disk Cache VS Memory Cache
  ä¸¤è€…å¯¹æ¯”ï¼Œä¸»è¦çš„ç­–ç•¥ ðŸ‘‡
  - å†…å®¹ä½¿ç”¨çŽ‡é«˜çš„è¯ï¼Œæ–‡ä»¶ä¼˜å…ˆè¿›å…¥ç£ç›˜
  - æ¯”è¾ƒå¤§çš„ JSï¼ŒCSS æ–‡ä»¶ä¼šç›´æŽ¥æ”¾å…¥ç£ç›˜ï¼Œåä¹‹æ”¾å…¥å†…å­˜ã€‚
- Push Cache
  æŽ¨é€ç¼“å­˜ï¼Œè¿™ç®—æ˜¯æµè§ˆå™¨ä¸­æœ€åŽä¸€é“é˜²çº¿å§ï¼Œå®ƒæ˜¯ HTTP/2 çš„å†…å®¹ã€‚å…·ä½“æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæœ‰å…´è¶£çš„å¯ä»¥åŽ»äº†è§£ã€‚

### æ€»ç»“

- é¦–å…ˆæ£€æŸ¥ Cache-Controlï¼Œ å°é²œï¼Œçœ‹å¼ºç¼“å­˜æ˜¯å¦å¯ç”¨
- å¦‚æžœå¯ç”¨çš„è¯ï¼Œç›´æŽ¥ä½¿ç”¨
- å¦åˆ™è¿›å…¥åå•†ç¼“å­˜ï¼Œå‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨é€šè¿‡è¯·æ±‚å¤´ä¸­çš„ If-Modified-Since æˆ–è€… If-None-Match å­—æ®µæ£€æŸ¥èµ„æºæ˜¯å¦æ›´æ–°
- èµ„æºæ›´æ–°ï¼Œè¿”å›žèµ„æºå’Œ 200 çŠ¶æ€ç ã€‚
- å¦åˆ™ï¼Œè¿”å›ž 304ï¼Œç›´æŽ¥å‘Šè¯‰æµè§ˆå™¨ç›´æŽ¥ä»Žç¼“å­˜ä¸­åŽ»èµ„æºã€‚

# ç®—æ³•

## æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚

ç¤ºä¾‹ 1:

```
è¾“å…¥: "abcabcbb"
```

è¾“å‡º: 3

è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "abc"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚

```js
/**
 * https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/
 * @param {string} s
 * @return {number}
 */

var lengthOfLongestSubstring = function(s) {
  let mapTemp = new Map(),
    max = 0;
  const len = s.length;
  for (let i = 0, j = 0; j < len; j++) {
    if (mapTemp.has(s[j])) {
      // çª—å£çš„startæ›´æ–°
      i = Math.max(mapTemp.get(s[j]) + 1, i);
    }
    max = Math.max(max, j - i + 1);
    mapTemp.set(s[j], j);
  }
  return max;
};
```

# Vue çŸ¥è¯†

## nextTick å®žçŽ°åŽŸç†

åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªçŽ¯ç»“æŸä¹‹åŽæ‰§è¡Œå»¶è¿Ÿå›žè°ƒã€‚nextTick ä¸»è¦ä½¿ç”¨äº†å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ã€‚æ ¹æ®æ‰§è¡ŒçŽ¯å¢ƒåˆ†åˆ«å°è¯•é‡‡ç”¨

- Promise
- MutationObserver
- setImmediate
- å¦‚æžœä»¥ä¸Šéƒ½ä¸è¡Œåˆ™é‡‡ç”¨ setTimeout

å®šä¹‰äº†ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå¤šæ¬¡è°ƒç”¨ nextTick ä¼šå°†æ–¹æ³•å­˜å…¥é˜Ÿåˆ—ä¸­ï¼Œé€šè¿‡è¿™ä¸ªå¼‚æ­¥æ–¹æ³•æ¸…ç©ºå½“å‰é˜Ÿåˆ—ã€‚
